<div
  class="body"
  dir="rtl"
>
  <div
    class="login-container"
  >

    <!-- Header -->
    <div class="text-center mb-8">
      <div
        class="mx-auto mb-4 w-16 h-16 flex items-center justify-center
               rounded-full bg-yellow-500/10 border border-yellow-500/30"
      >
        <span class="text-3xl text-yellow-400">🔒</span>
      </div>

      <h1 class="text-2xl font-bold text-yellow-400">
        تغيير كلمة المرور
      </h1>

      <p class="mt-2 text-sm text-gray-300">
        اختر كلمة مرور قوية لحماية حسابك في منصة
        <span class="text-yellow-400 font-semibold">فينيكس</span>
      </p>
    </div>

    <!-- Form -->
    <form class="space-y-5">

      <!-- Current Password -->
      <div class="field password-field">
        <label> كلمة المرور الحالية</label>
        <div class="password-wrapper">
          <input
            [(ngModel)]="currentPassword"
            name="currentPassword"
            [type]="hidePassword ? 'password' : 'text'"
            placeholder="**********"
            required
          />
          <button
            type="button"
            class="toggle-password"
            (click)="togglePassword()"
            [attr.aria-label]="hidePassword ? 'إظهار كلمة المرور' : 'إخفاء كلمة المرور'"
          >
            {{ hidePassword ? '🫣' : '👁️' }}
          </button>
        </div>
      </div>

      <!-- New Password -->
      <div class="field password-field">
        <label> كلمة المرور الجديدة</label>
        <div class="password-wrapper">
          <input
            [(ngModel)]="newPassword"
            name="newPassword"
            [type]="hidePassword2 ? 'password' : 'text'"
            placeholder="**********"
            required
          />
          <button
            type="button"
            class="toggle-password"
            (click)="togglePassword2()"
            [attr.aria-label]="hidePassword2 ? 'إظهار كلمة المرور' : 'إخفاء كلمة المرور'"
          >
            {{ hidePassword2 ? '🫣' : '👁️' }}
          </button>
        </div>
      </div>

      <!-- Confirm Password -->
      <div class="field password-field">
        <label>تأكيد كلمة المرور الجديدة</label>
        <div class="password-wrapper">
          <input
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            [type]="hidePassword2 ? 'password' : 'text'"
            placeholder="**********"
            required
          />
    
        </div>
      </div>

      <!-- Actions -->
      <div class="flex gap-3 pt-4">
        <button
        (click)="savePassword()"
          type="submit"
          class="flex-1 py-2 rounded-full
                 bg-yellow-400 text-black font-semibold
                 hover:bg-yellow-500 transition"
        >
       حفظ التغييرات
            </button>

        <button
          type="button"
          (click)="goBack()"
          class="flex-1 py-2 rounded-full
                 border border-yellow-400 text-yellow-400
                 hover:bg-yellow-400 hover:text-black transition"
        >
          إلغاء
        </button>
        
      </div>
      @if (message()) {
        <p class="mt-4 text-center text-sm" [class.text-red-500]="!success()" [class.text-green-500]="success()">
          {{ message() }}
        </p>
    }
    </form>

    <!-- Hint -->
    <p class="mt-6 text-xs text-center text-gray-500">
      يجب أن تحتوي كلمة المرور على 8 أحرف على الأقل، رقم، ورمز خاص
    </p>
    @if (loading()) {
        <div class="loading-overlay">
          <div class="loading-ring">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
          </div>
          <p class="loading-text">جاري تعديل كلمة المرور...</p>
        </div>
      }
  </div>
</div>
