<section class="p-6 md:p-10 min-h-screen">

    <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
      <h1 class="text-2xl font-bold text-yellow-500">
        Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠÙ† 
      </h1>
      <div class="flex gap-3 flex-col md:flex-row">
        <input 
          type="text" 
          [ngModel]="searchText()" 
          (ngModelChange)="searchText.set($event)" 
          placeholder="Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¯Ø±Ø³..." 
          class="px-4 py-2 rounded-lg border border-gray-600 bg-[#1f1f1f]
          focus:outline-none focus:ring-2 focus:ring-yellow-400">      
      <button
        (click)="addTeacher()"
        class="bg-[#FFC107] hover:bg-yellow-500 text-black font-semibold px-5 py-2 rounded-lg shadow">
        + Ø¥Ø¶Ø§ÙØ© Ù…Ø¯Ø±Ø³
      </button>
    </div>
    </div>
    <h4 class="mb-6">
        <span class="text-2xl font-bold text-yellow-500">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠÙ† : </span>
        <span class="text-2xl font-bold text-white-500">{{teachers().length}}</span>
    </h4>
  
  
    <!-- Loading -->
    @if (loading()) {
      <div class="flex justify-center items-center py-20">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"></div>
      </div>
    }
  
    <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠÙ† -->
    @else {
      <div class="overflow-x-auto taa rounded-xl shadow hidden md:block max-h-[61vh] overflow-y-auto">
        <table class=" min-w-full text-sm text-right max-h-[65hv] overflow-y-auto">
          <thead class="bg-[#FFC107] text-white">
            <tr>
              <th class="px-4 py-3">Ø§Ù„ØµÙˆØ±Ø©</th>
              <th class="px-4 py-3">Ø§Ù„Ø§Ø³Ù…</th>
              <th class="px-4 py-3">Ø§Ù„Ù…Ø§Ø¯Ø©</th>
              <th class="px-4 py-3">Ø§Ù„Ù‡Ø§ØªÙ</th>
              <th class="px-4 py-3">Ø§Ù„Ù†ÙˆØ¹</th>
              <th class="px-4 py-3">Ù…Ù…ÙŠØ²</th>
              <th class="px-4 py-3">Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ</th>

              <th class="px-4 py-3 text-center">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
  
          <tbody>
            @if (isAdding()) {
                <tr class="">
              
                  <!-- Ø§Ù„ØµÙˆØ±Ø© -->
                  <td class="px-4 py-3 text-center">
                    <input
                      [(ngModel)]="newTeacher().IMAGE"
                      placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©"
                      class="w-24 px-2 py-1 border rounded border border-gray-300 focus:outline-none focus:ring-2  focus:ring-yellow-400" />
                  </td>
              
                  <!-- Ø§Ù„Ø§Ø³Ù… -->
                  <td class="px-4 py-3">
                    <input
                      [(ngModel)]="newTeacher().FIRST_NAME"
                      placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„"
                      class="w-full px-2 py-1 border rounded border border-gray-300 focus:outline-none focus:ring-2  mb-1 focus:ring-yellow-400" />
                    <input
                      [(ngModel)]="newTeacher().LAST_NAME"
                      placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"
                      class="w-full px-2 py-1 border rounded border border-gray-300 focus:outline-none focus:ring-2  focus:ring-yellow-400" />
                  </td>
              
                  <!-- Ø§Ù„Ù…Ø§Ø¯Ø© -->
                  <td class="px-4 py-3">
                    <input
                      [(ngModel)]="newTeacher().SUBJECT"
                      placeholder="Ø§Ù„Ù…Ø§Ø¯Ø©"
                      class="w-full px-2 py-1 border rounded border border-gray-300 focus:outline-none focus:ring-2  focus:ring-yellow-400" />
                  </td>
              
                  <!-- Ø§Ù„Ù‡Ø§ØªÙ -->
                  <td class="px-4 py-3">
                    <input
                    [(ngModel)]="newTeacher().PHONE_NUMBER"
                    placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"
                    required
                    class="w-full px-2 py-1 border rounded border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400" />
                                    </td>
              
                  <!-- Ø§Ù„Ù†ÙˆØ¹ -->
                  <td class="px-4 py-3">
                    <select
                      [(ngModel)]="newTeacher().GENDER"
                      class="w-full  px-2 py-1 border rounded border border-gray-300 focus:outline-none focus:ring-2  focus:ring-yellow-400">
                      <option class="text-black" value="M">Ø°ÙƒØ±</option>
                      <option  class="text-black" value="F">Ø£Ù†Ø«Ù‰</option>
                    </select>
                  </td>
              
                  <!-- Ù…Ù…ÙŠØ² -->
                  <td class="px-4 py-3">
                    <select
                      [(ngModel)]="newTeacher().GOLDEN"
                      class="w-full px-2 py-1 border rounded border border-gray-300 focus:outline-none focus:ring-2  focus:ring-yellow-400">
                      <option  class="text-black" value="N">Ø¹Ø§Ø¯ÙŠ</option>
                      <option  class="text-black" value="Y">â­ Ù…Ù…ÙŠØ²</option>
                    </select>
                  </td>
              
                  <!-- Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
                  <td class="px-4 py-3 text-center">
                    â€”
                  </td>
              
                  <!-- Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
                  <td class="px-4 py-3 text-center space-x-2 space-x-reverse">
                    <button
                      (click)="saveTeacher()" 
                      class="px-3 py-1 bg-green-500 text-white rounded">
                      Ø­ÙØ¸
                    </button>
              
                    <button
                      (click)="cancelAdd()"
                      class="px-3 py-1 bg-gray-400 text-white rounded">
                      Ø¥Ù„ØºØ§Ø¡
                    </button>
                  </td>
                </tr>
              }
           
              
              @for (teacher of filteredTeachers(); track teacher.TEACHER_ID) {
                <tr class="border-b border-yellow-500 hover:bg-[#b5b5b5]/[0.3] transition-colors" [class.bg-gray-700]="editingTeacherId() === teacher.TEACHER_ID">
                  
                  <td class="px-4 py-3">
                    @if (editingTeacherId() === teacher.TEACHER_ID) {
                      
                      <input
                      type="file"
                      accept="image/*"
                      (change)="onFileSelected($event)"
                      class="w-full text-black">
                      }
                    
                      @else {
                      <img [src]="teacher.IMAGE || 'teacher1.png'" class="w-12 h-12 rounded-full object-cover mx-auto">
                    }
                  </td>
              
                  <td class="px-4 py-3">
                    @if (editingTeacherId() === teacher.TEACHER_ID) {
                      <input [(ngModel)]="newTeacher().FIRST_NAME" class="w-full mb-1 px-1 border rounded text-black" placeholder="Ø§Ù„Ø£ÙˆÙ„">
                      <input [(ngModel)]="newTeacher().LAST_NAME" class="w-full px-1 border rounded text-black" placeholder="Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©">
                    } @else {
                      {{ teacher.FIRST_NAME }} {{ teacher.LAST_NAME }}
                    }
                  </td>
              
                  <td class="px-4 py-3">
                    @if (editingTeacherId() === teacher.TEACHER_ID) {
                      <input [(ngModel)]="newTeacher().SUBJECT" class="w-full px-1 border rounded text-black">
                    } @else {
                      {{ teacher.SUBJECT }}
                    }
                  </td>
              
                  <td class="px-4 py-3">
                    @if (editingTeacherId() === teacher.TEACHER_ID) {
                      <input dir="ltr" [(ngModel)]="newTeacher().PHONE_NUMBER" class="w-full px-1 border rounded text-black">
                    } @else {
                     <div dir="ltr"> {{ teacher.PHONE_NUMBER }}</div>
                    }
                  </td>
              
                  <td class="px-4 py-3">
                    @if (editingTeacherId() === teacher.TEACHER_ID) {
                      <select [(ngModel)]="newTeacher().GENDER" class="text-black rounded">
                        <option value="M">Ø°ÙƒØ±</option>
                        <option value="F">Ø£Ù†Ø«Ù‰</option>
                      </select>
                    } @else {
                      {{ teacher.GENDER === 'M' ? 'Ø°ÙƒØ±' : 'Ø£Ù†Ø«Ù‰' }}
                    }
                  </td>
              
                  <td class="px-4 py-3">
                    @if (editingTeacherId() === teacher.TEACHER_ID) {
                      <select [(ngModel)]="newTeacher().GOLDEN" class="text-black rounded">
                        <option value="N">Ø¹Ø§Ø¯ÙŠ</option>
                        <option value="Y">â­ Ù…Ù…ÙŠØ²</option>
                      </select>
                    } @else {
                      <span [class.text-yellow-500]="teacher.GOLDEN === 'Y'">
                        {{ teacher.GOLDEN === 'Y' ? 'â­ Ù…Ù…ÙŠØ²' : 'Ø¹Ø§Ø¯ÙŠ' }}
                      </span>
                    }
                  </td>
                  <td class="px-4 py-3 ">
                    @if(editingTeacherId()===teacher.TEACHER_ID){
                      <input dir="ltr" [(ngModel)]="newTeacher().youtubeUrl" class="w-full px-1 border rounded text-black">
   
                    }@else{
                      <a dir="ltr" class="block w-30 truncate text-white-600 hover:underline" target="_blank" href="{{teacher.youtubeUrl}}">{{teacher.youtubeUrl}}</a> 
                    }
                  </td>
                  <td class="px-4 py-3 text-center flex flex-col space-y-2 space-y-reverse">
                    @if (editingTeacherId() === teacher.TEACHER_ID) {
                      <button (click)="saveTeacher()" class="px-2 py-1 bg-green-500 text-white rounded text-xs">Ø­ÙØ¸</button>
                      <button (click)="cancelAdd()" class="px-2 py-1 bg-gray-500 text-white rounded text-xs">Ø¥Ù„ØºØ§Ø¡</button>
                    } @else {
                      <button (click)="editTeacher(teacher)" class=" py-1 bg-blue-500 text-white rounded text-xs w-full">ØªØ¹Ø¯ÙŠÙ„</button>
                      <button (click)="deleteTeacher(teacher)" class="px-2 py-1 bg-red-500 text-white rounded text-xs w-full">Ø­Ø°Ù</button>
                    }
                  </td>
                </tr>
              }
  
            @if (filteredTeachers().length === 0) {
              <tr>
                <td colspan="7" class="text-center py-10 text-gray-500">
                  Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¯Ø±Ø³ÙŠÙ† Ù…Ø·Ø§Ø¨Ù‚ÙŠÙ† Ù„Ù„Ø¨Ø­Ø«
                </td>
              </tr>
            }
          </tbody>
        </table>
  <!-- Cards Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
      </div>
      
<!-- Cards Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
<div class="md:hidden space-y-4 w-full">

  @for (teacher of filteredTeachers(); track teacher.TEACHER_ID) {

    <div class="bg-[#1f1f1f] rounded-xl p-4 shadow border border-yellow-500/20">

      <!-- ğŸŸ¡ ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ -->
      @if (editingTeacherId() === teacher.TEACHER_ID) {

        <div class="space-y-3">

          <input [(ngModel)]="newTeacher().FIRST_NAME"
            placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„"
            class="w-full p-2 rounded border">

          <input [(ngModel)]="newTeacher().LAST_NAME"
            placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"
            class="w-full p-2 rounded border">

          <input [(ngModel)]="newTeacher().SUBJECT"
            placeholder="Ø§Ù„Ù…Ø§Ø¯Ø©"
            class="w-full p-2 rounded border">

          <input [(ngModel)]="newTeacher().PHONE_NUMBER"
            placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"
            class="w-full p-2 rounded border">

          <select [(ngModel)]="newTeacher().GENDER"
            class="w-full p-2 rounded border">
            <option value="M">Ø°ÙƒØ±</option>
            <option value="F">Ø£Ù†Ø«Ù‰</option>
          </select>

          <select [(ngModel)]="newTeacher().GOLDEN"
            class="w-full p-2 rounded border">
            <option value="N">Ø¹Ø§Ø¯ÙŠ</option>
            <option value="Y">â­ Ù…Ù…ÙŠØ²</option>
          </select>
          <div class="mb-3">
            <label class="block text-sm font-medium mb-1">Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ (YouTube)</label>
            <input
              type="text"
              [(ngModel)]="newTeacher().youtubeUrl"
              placeholder="https://www.youtube.com/watch?v=..."
              class="w-full px-3 py-2 border rounded border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400"
            />
          </div>
          
          <input
          type="file"
          accept="image/*"
          (change)="onFileSelected($event)"
          class="w-full text-black">
          <div class="flex gap-2 pt-2">
            <button
              (click)="saveTeacher()" 
              class="flex-1 bg-green-500 py-2 rounded text-white">
              Ø­ÙØ¸
            </button>

            <button
              (click)="cancelAdd()"
              class="flex-1 bg-gray-500 py-2 rounded text-white">
              Ø¥Ù„ØºØ§Ø¡
            </button>
          </div>

        </div>

      }
      <!-- ğŸ”µ ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø±Ø¶ -->
      @else {

        <div class="flex  items-center gap-4 mb-3">
          <img
            [src]="teacher.IMAGE || 'teacher1.png'"
            class="w-14 h-14 rounded-full object-cover">

          <div>
            <h3 class="font-bold text-lg">
              {{ teacher.FIRST_NAME }} {{ teacher.LAST_NAME }}
            </h3>
            <p class="text-sm text-gray-400">
              {{ teacher.SUBJECT }}
            </p>
          </div>

        </div>
   
        <div class="grid grid-cols-2 gap-2 text-sm mb-3">
          <div>ğŸ“ {{ teacher.PHONE_NUMBER }}</div>
          <div>ğŸ‘¤ {{ teacher.GENDER === 'M' ? 'Ø°ÙƒØ±' : 'Ø£Ù†Ø«Ù‰' }}</div>
          <div> {{ teacher.GOLDEN === 'Y' ? 'â­ Ù…Ù…ÙŠØ²' : 'Ø¹Ø§Ø¯ÙŠ' }}</div>
        </div>

        <div>
         <a class="block w-30 truncate text-white-600 hover:underline" target="_blank" href="{{teacher.youtubeUrl}}">{{teacher.youtubeUrl}}</a> 
        </div>
        <div class="flex gap-2">
          <button
            (click)="editTeacher(teacher)"
            class="flex-1 bg-blue-500 py-2 rounded text-white">
            ØªØ¹Ø¯ÙŠÙ„
          </button>

          <button
            (click)="deleteTeacher(teacher)"
            class="flex-1 bg-red-500 py-2 rounded text-white">
            Ø­Ø°Ù
          </button>
        </div>

      }

    </div>
  }

</div>

    }
  
  </section>
  